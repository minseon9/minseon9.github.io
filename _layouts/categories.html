---
layout: archive
---

{{ content }}

{% if page.title and page.title != 'Posts by Category' %}
  {% assign filtered_posts = "" | split: "" %}
  {% assign page_title = page.title | downcase %}
  {% for post in site.posts %}
    {% if post.hidden != true %}
      {% for cat in post.categories %}
        {% assign cat_downcase = cat | downcase %}
        {% if cat_downcase == page_title %}
          {% assign filtered_posts = filtered_posts | push: post %}
          {% break %}
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endfor %}
{% else %}
  {% assign filtered_posts = site.posts | where_exp: "item", "item.hidden != true" %}
{% endif %}

{% if filtered_posts.size > 0 %}
  {% assign entries_layout = page.entries_layout | default: 'list' %}
  <div class="entries-{{ entries_layout }}">
    {% include documents-collection.html entries=filtered_posts type=entries_layout sort_by='updated' sort_order='reverse' %}
  </div>
{% else %}
  <p>No posts found for this category.</p>
{% endif %}
